<div class="container mt-4">
  <h3>ğŸ‘¨â€ğŸ“ GÃ©rer les Ã©tudiants</h3>
  
  <!-- Search Bar -->
  <div class="search-section">
    <div class="input-group mb-3">
      <span class="input-group-text">ğŸ”</span>
      <input type="text" class="form-control" placeholder="Chercher par nom, email, rÃ´le ou statut..." 
             [(ngModel)]="searchQuery" (keyup)="onSearchChange(searchQuery)">
      <button class="btn btn-outline-secondary" type="button" (click)="searchQuery = ''; onSearchChange('')">âœ• Effacer</button>
    </div>
    <div class="search-info">
      <small>RÃ©sultats: <strong>{{ filteredUsers.length }}</strong> / Total: <strong>{{ users.length }}</strong></small>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="py-3 text-center">
    <span>â³ Chargement...</span>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredUsers.length === 0" class="empty-state">
    <i class="fas fa-inbox" style="font-size: 3rem; color: #ddd;"></i>
    <p>Aucun Ã©tudiant trouvÃ©</p>
  </div>

  <!-- Table -->
  <div *ngIf="!loading && filteredUsers.length > 0" class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>ğŸ‘¤ Nom</th>
          <th>ğŸ“§ Email</th>
          <th>ğŸ·ï¸ RÃ´le</th>
          <th>ğŸ“Š Statut</th>
          <th>âš™ï¸ Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of paginatedUsers">
          <td><a (click)="viewDetails(u)" style="cursor:pointer">{{ u.name }}</a></td>
          <td>{{ u.email }}</td>
          <td><span class="badge badge-secondary">{{ u.role }}</span></td>
          <td>
            <span class="badge" [ngClass]="u.status === 'active' ? 'badge-success' : 'badge-warning'">
              {{ u.status === 'active' ? 'âœ“ Actif' : 'â³ Inactif' }}
            </span>
          </td>
          <td style="white-space: nowrap;">
            <button class="btn btn-sm btn-outline-primary me-2" (click)="viewDetails(u)">DÃ©tails</button>
            <button class="btn btn-sm btn-danger" (click)="remove(u)">Supprimer</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div *ngIf="!loading && filteredUsers.length > 0" class="pagination-section">
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" [ngClass]="currentPage === 1 ? 'disabled' : ''">
          <button class="page-link" (click)="previousPage()" [disabled]="currentPage === 1">â† PrÃ©cÃ©dent</button>
        </li>
        <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [ngClass]="currentPage === i + 1 ? 'active' : ''">
          <button class="page-link" (click)="goToPage(i + 1)">{{ i + 1 }}</button>
        </li>
        <li class="page-item" [ngClass]="currentPage === totalPages ? 'disabled' : ''">
          <button class="page-link" (click)="nextPage()" [disabled]="currentPage === totalPages">Suivant â†’</button>
        </li>
      </ul>
    </nav>
    <div class="pagination-info">
      <small>Page <strong>{{ currentPage }}</strong> / <strong>{{ totalPages }}</strong></small>
    </div>
  </div>
</div>
